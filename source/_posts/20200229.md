---
title: 20200229
categories:
  - 日记
urlname: diary
date: 2020-03-01 13:36:14
permalink:
---
2020-02-29 星期六

因为研究逆向搞得比较晚，因此没写日记直接去睡觉了，所以这篇日记实际上是3月1日写的。

最近又开始继续玩Another Eden，这个JRPG游戏还是十分不错的，在众多骗氪手游的时代还能做到出淤泥而不染。

我在十年前玩过时空之轮，当时就觉得这个游戏很不错，可惜以前因为年龄比较小没能通关，再加上当时也不懂得查攻略，有些地方卡住就卡住了。到现在我还印象深刻的是一个叫火龙战车的Boss，当时记得特别难打。还好网络越来越发达，多年后通过看视频的方式把剧情过完了。

所以当我偶然间得知时空之轮有个精神续作，叫Another Eden的时候，我就马上下载来玩了。实际体验也是没有辜负我的期望，这根本就是一个打着手游旗号的优质单机游戏。比较有意思的是，氪金入口居然不在主界面，而是被藏在菜单里头。然后唯一的一个氪金点，就是抽角色。不过这游戏是没有真五星角色的，不少五星角色都有提供四星版本，可以通过肝材料来升星，也算是十分亲民。更亲民的是，只用送的几个四星主角一样能打通第一部剧情。

还有一个比较引人注意的点，就是错综复杂的支线任务，例如城镇里接的支线任务，角色专属支线任务，还有隐藏的支线等等。最关键的是，每个支线都是用心制作的。比如公主米悠（Miyu），打完两个角色专属支线之后，还能继续打由六个支线构成的断章任务，感觉单独拿出来都可以做一个独立的故事章节了。

这个游戏唯一的缺点，就是肝，特别肝。很难想象，我在进行了3000次战斗，走了100000步之后，主力队伍还没升到满级（80级）。鉴于游戏本身是在本地进行的大量运算，而我又实在肝不动了，就打起了逆向修改的注意，从而达成快速练级。然而我把libgame.so拖入IDA看了半天也不知道要改哪儿，搜关键字也搜不到的样子。我去网上找了别人发的修改版，发现就只改了一条指令。指令本身很好懂，可是看了半天也不明白为啥这么改就是对的，特别郁闷。具体汇编由于篇幅原因我就不贴了，就贴改动的那句以及上下文。

```assembly
.text:00DB7F4C                 LDR             R1, [R6]
.text:00DB7F4E                 MOV             R9, R0
.text:00DB7F50                 MOV             R0, SP
.text:00DB7F52                 ADD.W           R5, R4, #8
.text:00DB7F56                 ADDS            R0, #4
.text:00DB7F58                 ADDS            R1, #4
.text:00DB7F5A                 STR             R5, [SP,#0x38+var_38]
.text:00DB7F5C                 BL.W            sub_68DBD8
.text:00DB7F60                 LDR             R0, [R6]
.text:00DB7F62                 ADDS            R0, #0x1C
.text:00DB7F64                 BL.W            sub_68DD7E
.text:00DB7F68                 MOV             R4, R0
.text:00DB7F6A                 ADD.W           R0, R6, #8
.text:00DB7F6E                 BL.W            sub_68DD7E
.text:00DB7F72                 ADDS            R2, R0, R4
(modified:00DB7F72             MOVS            R2, #0x19)
.text:00DB7F74                 MOV             R1, SP
.text:00DB7F76                 MOV             R0, R9
.text:00DB7F78                 MOV             R3, R8
```

看起来这个R2寄存器就是数量，因为修改后通过立即数0x19(=25)赋值了，但是看了半天也没懂为什么这个就是。。。其实归根到底还是水平太菜，有空还是找本ARM汇编的书翻一翻，大概了解下常见指令。

反正不管怎样，修改版算是用上了，虽然只能对拾取物品增幅，但是已经可以通过箱子开经验卷轴来快速升级了，而且也不会太过破坏游戏平衡。